{% load static %}
{% block title %}
   <title>E-Kubo: Update user</title>
{% endblock title %}
<link rel="icon" type="image/png" href="{% static 'icons/ekubo_icon.png' %}">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="{% static 'css/slideup.css' %}">
<div class="container mt-4 d-flex justify-content-center slide-up">
    <div class="card p-4 shadow-lg rounded bg-white" style="max-width: 400px; width: 100%;">
        <h4 class="text-center mb-3" style="font-family: 'Arial', sans-serif;">Update Profile</h4>
        <form method="POST" id="updateForm" style="font-family: 'Arial', sans-serif;">
            {% csrf_token %}
            
            <div class="mb-3">
                <label class="form-label">Username</label>
                {{ form.username }}
                <small class="text-danger d-none" id="usernameError">Username must be at least 4 characters</small>
            </div>

            <div class="mb-3">
                <label class="form-label">First Name</label>
                {{ form.first_name }}
            </div>

            <div class="mb-3">
                <label class="form-label">Last Name</label>
                {{ form.last_name }}
            </div>

            <div class="mb-3">
                <label class="form-label">Phone</label>
                {{ form.phone }}
                <small class="text-danger d-none" id="phoneError">Invalid phone number</small>
            </div>

            <button type="submit" class="btn btn-primary w-100">Update</button>
        </form>
    </div>
</div>
<script src="{% static 'js/slideup.js' %}"></script>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const usernameField = document.getElementById("id_username");
        const phoneField = document.getElementById("id_phone");
        const usernameError = document.getElementById("usernameError");
        const phoneError = document.getElementById("phoneError");

        usernameField.addEventListener("input", function () {
            if (this.value.length < 4) {
                usernameError.classList.remove("d-none");
            } else {
                usernameError.classList.add("d-none");
            }
        });

        phoneField.addEventListener("input", function () {
            const phonePattern = /^[0-9]{10,15}$/;
            if (!phonePattern.test(this.value)) {
                phoneError.classList.remove("d-none");
            } else {
                phoneError.classList.add("d-none");
            }
        });
    });
</script>
